<!DOCTYPE HTML>
<html>
	<head>
		<title>bitsy editor</title>

		<style>
			body {
				background: #ccccff;
				line-height: 150%;
				font-family: "Gill Sans", Arial, sans-serif;
				font-size: 15px;
			}
			canvas {
				background: black;
			}
			#topbar {
				width: 100%;
			}
			.panel {
				float:left;
				background: white;
				margin:10px;
				padding: 10px;
			}
			textarea {
				font-family: monospace;
			}
			button {
				font-family: "Gill Sans", Arial, sans-serif;
				font-size: 12px;
			}
			input {
				font-family: monospace;
			}
			#unsupportedFeatures {
				background: white;
				border: solid red 2px;
				padding: 10px;
				margin: 10px;
			}
			.helpMessage {
				background: #eee;
				padding: 5px;
				margin: 2px;
				color: #555;
				font-size: 13px;
				line-height: 130%;
			}
			#aboutInner {
				font-size: 13px;
				line-height: 130%;
			}
			#exitCanvas {
				width:256px;
				height:256px;
			}
			#editSelectedExit {
				background: #eee;
				padding: 10px;
				margin: 2px;
				width: 256px;
				height: 315px; 
				color: #555;
			}
		</style>

		<script src="bitsy.js"></script>
		<script src="editor.js"></script>
	</head>

	<body onload="start()">
		<div id="topbar">
			bitsy editor v0.1 by <a href="https://www.twitter.com/adamledoux">@adamledoux</a>
		</div>
		<div id="unsupportedFeatures" style="display:none;">
			~ UH OH ~ your browser doesn't support all of bitsy's features, so some things might not work right. Maybe try <a href="https://www.google.com/chrome/browser" target="_blank">chrome</a> or <a href="https://www.mozilla.org/firefox" target="_blank">firefox</a>? - adam
			<br>
			<button onclick="hideUnsupportedFeatureWarning();">I'll be ok, hide this message</button>
		</div>
		<div class="panel" id="about">
			~ about bitsy ~ <br>
			<div id="aboutInner">
				hi! bitsy is a little editor for little games or worlds. <br>
				the goal is to make it easy to make games where you <br>
				can walk around and talk to people and be somewhere. <br><br>
				i hope you enjoy using it! <br>
				- adam <br><br>

				<a href="#" onclick="toggleInstructions();">~ instructions ~</a> <br>
				<div id="instructions" style="display:none;">
					you can draw things in the ~ paint ~ panel, then place <br>
					them in your world in the ~ room ~ panel. you can write <br>
					dialog for your characters (aka sprites) too. <br>
					<br>
					some words:<br>
					* room - a place in your game world<br>
					* avatar - the player's character<br>
					* tile - a piece of the scenery<br>
					* sprite - other characters or things<br>
					<br>
					to try your game, switch the room to play mode: <br>
					* walk around with the arrow keys <br>
					* talk to sprites by walking up to them <br>
					<br>
					use "share game" to download the game as an html file. <br>
					you can email the file to a friend, or host it online! <br>
					<br>
					if you want to talk about bitsy, report a bug, or share <br>
					a game you made, i'm on twitter <a href="https://www.twitter.com/adamledoux">@adamledoux</a><br>
					<br>
					special thanks to: <br>
					* mary-margaret <br>
					* seattle game meetup peeps
				</div>
				<br>

				<a href="#" onclick="toggleVersionNotes();">~ what's new v0.1 ~</a> <br>
				<div id="versionNotes" style="display:none;">
					version 0.1 <br>
					<i>new features:</i> <br>
					- games have touch controls! <br>
					<i>bugfixes:</i> <br>
					- quotation marks in dialog don't break game <br>
					- drawing on Surface devices works <br>
					- pasting new game data refreshes everything <br>
					- editor detects unsupported features <br>
					- fix autocomplete color bug in Safari <br>
					- limit number of sprites
				</div>

				<br>
				<button onclick="hideAbout();"> ok, hide all this nonsense </button>
			</div>
		</div>
		<div class="panel">
			~ room ~
			<form>
				<input type="radio" name="edit mode" value="edit" onclick="on_edit_mode()" checked> edit
				<input type="radio" name="edit mode" value="play" onclick="on_play_mode()"> play
			</form>
			<canvas id="game"></canvas>
			<br>
			<div id="roomNav">
				room <span id="roomId">0</span><br>
				<button onclick="prevRoom();"> < prev </button>
				<button onclick="nextRoom();"> next > </button>
				<button onclick="newRoom();"> + new </button>
			</div>
			<button onclick=""> add exits to other rooms </button>
			<button onclick="toggleMapGrid();"> show/hide tile grid </button>
		</div>
		<div class="panel">
			~ exits ~ <br>
			<button onclick="addExit();" id="addExitButton"> + add new exit to this room </button>
			<span id="addingExitHelpText" style="display:none;"><i>click space in room to add exit</i></span>
			<div id="editSelectedExit">
				<div id="noExitSelected">
					<i>no exit selected</i>
				</div>
				<div id="exitSelected" style="display:none;">
					this exit goes to: 
					<select id="exitGoesToSelect">
						<option>room 0</option>
					</select>
					<br>
					<canvas id="exitCanvas"></canvas>
					<br>
					<button onclick="deleteSelectedExit();"> - delete selected exit </button>
				</div>
			</div>
		</div>
		<div class="panel">
			~ paint ~ <br>
			<form>
				<input type="radio" name="paint mode" value="sprite" onclick="on_paint_avatar();" checked> avatar
				<input type="radio" name="paint mode" value="tile" onclick="on_paint_tile();"> tile
				<input type="radio" name="paint mode" value="sprite" onclick="on_paint_sprite();"> sprite
			</form>
			<div id="paintNav" style="display:none;">
				<button onclick="prev();"> < prev </button>
				<button onclick="next();"> next > </button>
				<button onclick="newDrawing();"> + new </button>
			</div>
			<canvas id="paint"></canvas>
			<br>
			<div id="wall" style="display:none;">is this tile a wall? <input type="checkbox" id="wallCheckbox" onchange="on_toggle_wall();"> </div>
			<div id="dialog" style="display:none;">dialog: <input type="text" id="dialogText" onchange="on_change_dialog();"></div>
			<button onclick="toggleGrid();"> show/hide pixel grid </button>
		</div>
		<div class="panel">
			~ colors ~ <br>
			<input type="color" value="#0052cc" id="backgroundColor" onchange="on_change_color_bg();" autocomplete="off"> background <br>
			<input type="color" value="#809fff" id="tileColor" onchange="on_change_color_tile();" autocomplete="off"> tile <br>
			<input type="color" value="#ffffff" id="spriteColor" onchange="on_change_color_sprite();" autocomplete="off"> sprite <br>
			<div id="colorPickerHelp" class="helpMessage" style="display:none;">
				Having trouble choosing hex colors? <br>
				Try this online <a href="http://www.w3schools.com/colors/colors_picker.asp" target="_blank">color picker</a>.
			</div>
		</div>
		<div class="panel">
			~ title and share ~ <br>
			title: <input type="text" id="titleText" onchange="on_change_title();" value="Write title here"> <br>
			<button onclick="exportGame();">share game</button>
			<br>
			<div id="downloadHelp" class="helpMessage" style="display:none;">
				Note: your browser doesn't support<br>
				direct downloads, so sharing requires<br>
				some extra steps:<br>
				- press share <br>
				- a new tab will open <br>
				- save that tab <br>
				- name it "mygame.html" <br>
				- share your game as a web page!
			</div>
		</div>
		<div class="panel">
			~ game data ~ <br>
			<textarea id="game_data" style="width:300px;height:300px;" onchange="on_game_data_change();"></textarea>
		</div>
	</body>
</html>