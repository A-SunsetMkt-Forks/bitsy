<!DOCTYPE HTML>
<html>
	<head>
		<title>bitsy editor</title>

		<style>
			body {
				margin: 0 !important;
				padding: 0 !important;
				background: #ccccff;
				
				line-height: 170%;
				font-family: "Nunito", Helvetica, Arial, sans-serif;
				font-size: 18px;
			}
			button {
				font-family: Helvetica, Arial, sans-serif;
				font-size: 13px;
			}
			canvas {
				background: black;
			}
			#topbar {
				width: 100%;
				/*height: 40px;*/
				background: white;

				border-bottom: solid 3px #888;
				
				padding: 10px;
				padding-left: 20px;
				padding-right: 20px;
    			box-sizing: border-box;
			}
			#editorWindow {
				width:100%;
				height:750px;
				overflow:scroll;
				overflow-y:hidden;
    			box-sizing: border-box;
				/*background:green;*/
			}
			#editorContent {
				height:100%;
				/*width:800px;*/
				/*background: blue;*/
				white-space: nowrap;
				display: inline-block;
				padding-left: 5px;
				padding-right: 20px;
			}
			.panel {
				/*float: left;*/
				display: inline-block;
				vertical-align: top;
				background: white;
				margin: 10px;
				margin-right: 0px;
				padding: 10px;

				border-bottom: solid 3px #888;
				border-radius: 5px;
				font-size: 16px;
			}
			.panel .bar {
				background: #eee;
				
				border-bottom: 2px solid #aaa;

				padding: 5px;
				padding-left: 10px;
				padding-right: 10px;
				padding-bottom: 2px;
				margin: -10px;
				margin-bottom: 10px;
				border-radius: 5px 5px 0px 0px;
				
				font-size: 18px;
				line-height: 150%;
			}
			.panel .bar .material-icons {
				line-height: 150%;
				/*vertical-align: -10%;*/
				vertical-align: middle;
				font-size: 22px;
			}
			.panelShadow {
				display: inline-block;
				vertical-align: top;
				background: #aaaadd;
				margin: 10px;
				margin-right: 0px;
				border-radius: 5px;
			}
			textarea {
				font-family: monospace;
			}
			input {
				font-family: monospace;
			}
			#unsupportedFeatures {
				background: #fdd;
				border: solid red 2px;
				padding: 10px;
				margin: 10px;
			}
			.helpMessage {
				background: #eee;
				padding: 5px;
				margin: 2px;
				color: #555;
				font-size: 13px;
				line-height: 130%;
			}
			#aboutInner {
				font-size: 13px;
				line-height: 130%;
			}
			#exitCanvas {
				width:256px;
				height:256px;
			}
			#editSelectedExit {
				background: #eee;
				padding: 10px;
				margin: 2px;
				width: 256px;
				height: 350px; 
				color: #555;
				font-size: 13px;
			}
			.minimize {
				float:right;
				color:blue;
			}
			.minimize:hover {
				font-weight: bold;
			}
			#titleText {
				width: 400px;
				font-size: 16px;
			}
			#bitsyEditorName {
				font-size: 14px;
				float: right;
			}
			.toggleText {
				color: blue;
				text-decoration: underline;
			}
			.toggleText:hover {
				font-weight: bold;
			}
			.options {
				background: #f2f2f2;
				padding: 7px;
				margin-top: 2px;
				margin-bottom: 2px;
				color: #333;
				font-size: 13px;
				line-height: 150%;
			}
			.dialogTextArea {
				resize: none;
				font-size: 12px;
				width: 32ch;
			}
		</style>

		<!-- COLOR THEME STYLE -->
		<style>
			/*default style*/
			/*			
			#topbar {
				background: white;
				border-bottom: solid 3px #888;
			}
			.panel {
				background: white;
				border-bottom: solid 3px #888;
			}
			.panel .bar {
				background: #eee;
				border-bottom: 2px solid #aaa;
			}
			.panelShadow {
				background: #aaaadd;
			}
			*/

			#topbar {
				background: white;
				/*border-bottom: solid 3px #888;*/
				border-bottom: none;
			}

			.panelShadow {
				background: #aaaadd;
			}

			.panel .material-icons {
				font-size: 18px;
			}

			/*default: gray*/
			.panel {
				background: white;
				border: solid 1px #888;
				border-bottom: solid 4px #888;
			}
			.panel .bar {
				background: #eee;
				border-bottom: 2px solid #aaa;
			}

			/*periwinkle*/
			.panel.color0 {
				background: white;
				border: solid 1px #9797f4;
				border-bottom: solid 4px #9797f4;
			}
			.bar.color0 {
				background: #eeeeff;
				border-bottom: 2px solid #9797f4;
			}

			/*pink*/
			.panel.color1 {
				background: white;
				border: solid 1px #ff88ff;
				border-bottom: solid 4px #ff88ff;
			}
			.bar.color1 {
				background: #ffeeff;
				border-bottom: 2px solid #ff88ff;
			}

			/*yellow*/
			.panel.color2 {
				background: white;
				border: solid 1px #f9ea72;
				border-bottom: solid 4px #f9ea72;
			}
			.bar.color2 {
				background: #ffffcc;
				border-bottom: 2px solid #f9ea72;
			}

			/*green*/
			.panel.color3 {
				background: white;
				border: solid 1px #00d197;
				border-bottom: solid 4px #00d197;
			}
			.bar.color3 {
				background: #ccfff1;
				border-bottom: 2px solid #00d197;
			}

		</style>

		<!-- BUTTON STYLE -->
		<style>
			button {
				font-family: "Nunito", Helvetica, Arial, sans-serif;
				padding: 3px;
				padding-left: 8px;
				padding-right: 8px;
				/*padding-bottom: 0px;*/
				margin-bottom: 4px;
				/*font-size: 20px;*/
				font-size: 14px;
				border: none;
				border-radius: 5px;
				background: #eee;
				border: solid 1px #aaa;
				border-bottom: solid 2px #aaa;
				vertical-align: middle;
				line-height: 100%;
			}
			button:active {
				/*margin-top: 2px;*/
				/*border-bottom: solid 2px white;*/
				background: #bbb;
				color:white;
			}
			button:focus { outline:none; }
			button .material-icons {
				font-size: 24px;
				vertical-align: middle;
				line-height: 100%;
			}

			/*periwinkle*/
			button.color0 {
				background: #eeeeff;
				/*border: solid 1px #9797f4;*/
				border: solid 1px #9797f4;
				border-bottom: solid 2px #9797f4;
			}
			button.color0:active {
				background: #9797f4;
			}

			/*pink*/
			button.color1 {
				background: #ffeeff;
				border: solid 1px #ff88ff;
				border-bottom: solid 2px #ff88ff;
			}
			button.color1:active {
				background: #ff88ff;
			}

			/*yellow*/
			button.color2 {
				background: #ffffcc;
				border: solid 1px #f9ea72;
				border-bottom: solid 2px #f9ea72;
			}
			button.color2:active {
				background: #f9ea72;
			}

			/*green*/
			button.color3 {
				background: #ccfff1;
				border: solid 1px #00d197;
				border-bottom: solid 2px #00d197;
			}
			button.color3:active {
				background: #00d197;
			}

			/* light button style */
			button.light {
				font-family: "Nunito", Helvetica, Arial, sans-serif;
				font-size: 14px;
				margin: none;
				padding: -5px;
				border: none;
				border-radius: 5px;
				background: none;
				color:black;
			}
			button.light:hover {
				background:#aaa;
			}
			button.light:active {
				background:black;
				color:white;
			}
			button.light:focus { outline:none; }
			button.light .material-icons {
				font-size: 20px;
			}
			/* light green */
			button.light.color3:hover {
				/*background:#00d197;*/
				/*opacity: 0.5;*/
				background: rgba(0, 209, 151, 0.2);
			}
			button.light.color3:active {
				background:#00d197;
				/*opacity: 1.0;*/
			}

			/* todo this seems weirdly specific */
			.panel .bar button .material-icons {
				font-size: 18px;
			}
		</style>

		<!-- checkbox style -->
		<style>
			input[type=checkbox] {
				display: none;
			}
			
			input[type=checkbox] + label {
				background: #ccc;
				color: black;
				padding: 3px;
				padding-left: 5px;
				padding-right: 5px;
				border-radius: 5px;
				margin: 2px;
				vertical-align: middle;
				line-height: 100%;
			}
			input[type=checkbox] + label .material-icons {
				vertical-align: middle;
				line-height: 100%;
			}
			
			input[type=checkbox]:checked + label {
				background: #444;
				color: white;
			}
		</style>

		<!-- ENGINE SCRIPTS -->
		<script src="font.js"></script>
		<script src="parser.js"></script>
		<script src="bitsy.js"></script>

		<!-- EDITOR SCRIPTS -->
		<script src="gif.js"></script>
		<script src="exporter.js"></script>
		<script src="editor.js"></script>

		<link href="https://fonts.googleapis.com/css?family=Nunito" rel="stylesheet">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	</head>

	<body onload="start()">
		<div id="topbar">
			<!-- <div style="width:10px;height:100%;margin:0px;float:left;background:#FBADCD;"></div> -->
			<!-- <div style="width:10px;height:100%;margin:0px;float:left;background:#7874FF;"></div> -->
			<!-- <div style="width:10px;height:100%;margin:0px;float:left;background:#82e4ed;"></div> -->

			<span style="float:left;"> Bitsy </span>

			<input type="text" id="titleText" onchange="on_change_title();" value="Write your game's title here" placeholder="Title">
			<button class="color0" onclick="showPanel('toolsPanel');" style="margin-left:20px;">
				<i class="material-icons">settings</i>
			</button>
			<button class="color0" onclick="newGameDialog();" style="margin-left:20px;">new game (start over!)</button>
			<span id="bitsyEditorName">
				Bitsy v3.1 by <a href="https://www.twitter.com/adamledoux">@adamledoux</a>
			</span>
		</div>
		<div style="width:25%;height:5px;float:left;background:#ff88ff;"></div>
		<div style="width:25%;height:5px;float:left;background:#00d197;"></div>
		<div style="width:25%;height:5px;float:left;background:#f9ea72;"></div>
		<div style="width:25%;height:5px;float:left;background:#9797f4;"></div>
		<!-- <div style="width:100%;height:5px;float:left;background:#9797f4;"></div> -->

		<div id="unsupportedFeatures" style="display:none;">
			UH OH your browser doesn't support all of bitsy's features, so some things might not work right. Maybe try <a href="https://www.google.com/chrome/browser" target="_blank">chrome</a> or <a href="https://www.mozilla.org/firefox" target="_blank">firefox</a>? - adam
			<br>
			<button onclick="hideUnsupportedFeatureWarning();">I'll be ok, hide this message</button>
		</div>

		<div id="editorWindow">
			<div id="editorContent">

				<div id="toolsPanel" class="panel color0" style="display:none;">
					<div class="bar color0" onmousedown="grabCard(event);">
						<i class="material-icons">settings</i> toolbar <span class="minimize" onclick="hidePanel('toolsPanel');">[ - ]</span>
					</div>
				
					<input type="checkbox" value="aboutPanel" id="aboutCheck" onclick="togglePanel(event);" checked/>
					<label for="aboutCheck">
						<i class="material-icons">info</i> about
					</label> <br>
					
					<input type="checkbox" value="roomPanel" id="roomCheck" onclick="togglePanel(event);" checked/>
					<label for="roomCheck">
						<i class="material-icons">grid_on</i> room
					</label> <br>

					<input type="checkbox" value="exitsPanel" id="exitsCheck" onclick="togglePanel(event);" />
					<label for="exitsCheck">
						<i class="material-icons">directions</i> exits
					</label> <br>

					<input type="checkbox" value="endingsPanel" id="endingsCheck" onclick="togglePanel(event);" />
					<label for="endingsCheck">
						<i class="material-icons">place</i> endings
					</label> <br>
					
					<input type="checkbox" value="paintPanel" id="paintCheck" onclick="togglePanel(event);"  checked/>
					<label for="paintCheck">
						<i class="material-icons">format_paint</i> paint
					</label> <br>
					
					<input type="checkbox" value="colorsPanel" id="colorsCheck" onclick="togglePanel(event);"  checked/>
					<label for="colorsCheck">
						<i class="material-icons">palette</i> colors
					</label> <br>
					
					<input type="checkbox" value="downloadPanel" id="downloadCheck" onclick="togglePanel(event);"  checked/>
					<label for="downloadCheck">
						<i class="material-icons">file_download</i> download
					</label> <br>
					
					<input type="checkbox" value="gifPanel" id="gifCheck" onclick="togglePanel(event);" />
					<label for="gifCheck">
						<i class="material-icons">videocam</i> record gif
					</label> <br>
					
					<input type="checkbox" value="dataPanel" onclick="togglePanel(event);" id="dataCheck"/>
					<label for="dataCheck">
						<i class="material-icons">save</i> game data
					</label>
				</div>

				<div id="aboutPanel" class="panel color0">
					<div class="bar color0" onmousedown="grabCard(event);">
						<i class="material-icons">info</i>
						about bitsy <span class="minimize" onclick="hidePanel('aboutPanel');">[ - ]</span>
					</div>
					<div id="aboutInner">
						hi! bitsy is a little editor for little games or worlds. <br>
						the goal is to make it easy to make games where you <br>
						can walk around and talk to people and be somewhere. <br><br>

						if you need inspiration, you can <a href="https://itch.io/c/90743/bitsy-games">play other bitsy games</a> 
						<br>on <a href="https://itch.io">itch.io</a>, which is a great place to share games!<br><br>


						have fun making things with bitsy! <br>
						- <a href="https://www.twitter.com/adamledoux">adam</a> <br><br>

						<span class="toggleText" onclick="toggleInstructions();">instructions</span> <br>
						<div id="instructions" style="display:none;">
							you can draw things in the <b>paint</b> panel, then place <br>
							them in your world in the <b>room</b> panel. you can write <br>
							dialog for your characters (aka sprites) too. you can <br>
							also animate your drawings if you want to! <br>
							<br>
							some words:<br>
							* room - a place in your game world<br>
							* avatar - the player's character<br>
							* tile - a piece of the scenery<br>
							* sprite - interactive characters or things<br>
							<br>
							to try your game, switch the room to play mode: <br>
							* walk around with the arrow keys <br>
							* talk to sprites by walking up to them <br>
							<br>
							you can make multiple rooms, but make sure you add <br>
							some <b>exits</b> to connect them to each other! <br>
							<br>
							use "share game" to download the game as an html file. <br>
							you can email the file to a friend, or host it online! <br>
							<br>
							if you want to talk about bitsy, report a bug, or share <br>
							a game you made, i'm on twitter <a href="https://www.twitter.com/adamledoux">@adamledoux</a><br>
							or you can post in the <a href="https://ledoux.itch.io/bitsy/community">community forum</a><br>
							<br>
							special thanks to: <br>
							* mary-margaret <br>
							* seattle game meetup peeps
						</div>
						<br>

						<span class="toggleText" onclick="toggleVersionNotes();">what's new in v3.1</span> <br>
						<div id="versionNotes" style="display:none;">
							v3.1:<br>
							- bugfix: duplicated rooms don't disappear<br>
							<br>
							v3.0:<br>
							- add endings to your game!<br>
							- you can have multiple color palettes (one per room)<br>
							- restart the game with ctrl-r or cmd-r<br>
							- dialog textbox matches size of dialog box in game<br>
							- gif encoding doesn't freeze the whole browser tab<br>
							- bug: you could edit sprites during play mode<br>
							- fixed a bug with animated tiles<br>
						</div>
					</div>
				</div>

				<div id="roomPanel" class="panel color3">
					<div class="bar color3" onmousedown="grabCard(event);">
						<i class="material-icons">grid_on</i> room
						<button class="light color3" style="float:right;" onclick="hidePanel('roomPanel');">
							<i class="material-icons">close</i>
						</button>
					</div>
					
					<canvas id="game"></canvas>
					
					
					<div style="margin-bottom:2px;">			
						<input type="checkbox" id="playModeCheck" onclick="togglePlayMode(event);" />
						<label for="playModeCheck">
							<i class="material-icons" id="playModeIcon">play_arrow</i>
							<span id="playModeText"> play </span>
						</label>
					</div>

					<div id="roomNav">
						room <span id="roomId">0</span>
						<button title="previous room" class="color0" onclick="prevRoom();">
							<i class="material-icons">navigate_before</i>
						</button>
						<button title="next room" class="color0" onclick="nextRoom();">
							<i class="material-icons">navigate_next</i>
						</button>
						<button title="add new room" class="color0" onclick="newRoom();">
							<i class="material-icons">add</i>
						</button>
						<button title="duplicate room" class="color0" onclick="duplicateRoom();">
							<i class="material-icons">content_copy</i>
						</button>
						<button title="delete room" class="color0" onclick="deleteRoom();">
							<i class="material-icons">remove</i>
						</button>
					</div>
					<div id="roomCommands">
						<button title="add exits to other rooms" class="color0" onclick="showPanel('exitsPanel');">
							<i class="material-icons">add</i> exits
						</button>
						<button title="add endings" class="color0" onclick="showPanel('endingsPanel');">
							<i class="material-icons">add</i> endings
						</button>
						color palette: 
						<select id="roomPaletteSelect" onchange="roomPaletteChange(event);">
							<option value="0">palette 0</option> <!-- other options are added dynamically -->
						</select>
					</div>

					<input type="checkbox" id="roomGridCheck" onclick="toggleMapGrid(event);" checked/>
					<label title="show / hide grid" for="roomGridCheck">
						<i class="material-icons" id="roomGridIcon">visibility</i> grid
					</label>

					<input type="checkbox" id="roomWallsCheck" onclick="toggleCollisionMap(event);" />
					<label title="show / hide walls" for="roomWallsCheck">
						<i class="material-icons" id="roomWallsIcon">visibility_off</i> walls
					</label>
				</div>

				<div id="exitsPanel" class="panel color3" style="display:none;">
					<div class="bar color3" onmousedown="grabCard(event);">
						<i class="material-icons">directions</i> 
						exits <span class="minimize" onclick="hidePanel('exitsPanel');">[ - ]</span>
					</div>
					<button class="color0" onclick="addExit();" id="addExitButton"> + add new exit to this room </button>
					<span id="addingExitHelpText" style="display:none;"><i>click space in room to add exit</i></span>
					<!-- todo needs a cancel button -->
					<div id="editSelectedExit">
						<div id="noExitSelected">
							<i>no exit selected</i>
						</div>
						<div id="exitSelected" style="display:none;">
							this exit goes to: 
							<select id="exitDestinationSelect" onchange="exitDestinationRoomChange(event);">
								<option value="0">room 0</option> <!-- other options are added dynamically -->
							</select>
							<br>
							<canvas id="exitCanvas"></canvas>
							<br>
							<i>click to place exit destination in this room</i>
							<br>
							<button class="color0" onclick="deleteSelectedExit();"> - delete selected exit </button>
						</div>
					</div>
				</div>

				<div id="endingsPanel" class="panel color3" style="display:block;">
					<div class="bar color3" onmousedown="grabCard(event);">
						<i class="material-icons">place</i>
						endings <span class="minimize" onclick="hidePanel('endingsPanel');">[ - ]</span>
					</div>
					<div id="endingNav">
						<button class="color0" onclick="prevEnding();"> < prev </button>
						<button class="color0" onclick="nextEnding();"> next > </button>
						<button class="color0" onclick="newEnding();"> + new </button>
						<!-- <button onclick="deleteEnding();"> x delete x </button> -->
					</div>
					ending <span id="endingId">0</span><br>
					<textarea id="endingText" class="dialogTextArea" onkeydown="on_change_ending();" onkeyup="on_change_ending();" onchange="on_change_ending();"></textarea>
					<br>
					<button class="color0" id="addEndingButton" onclick="addEnding();"> + place ending in room </button>
					<span id="addingEndingHelpText" style="display:none;"> click space in room to add ending </span>
					<!-- todo needs a cancel button -->
					<button class="color0" id="removeEndingButton" onclick="removeSelectedEnding();" style="display:none;"> - remove selected ending </button>
				</div>

				<div id="paintPanel" class="panel color1">
					<div class="bar color1" onmousedown="grabCard(event);">
						<i class="material-icons">format_paint</i>
						paint <span class="minimize" onclick="hidePanel('paintPanel');">[ - ]</span>
					</div>
					<form>
						<input type="radio" name="paint mode" value="sprite" onclick="on_paint_avatar();" id="paintOptionAvatar" checked> avatar
						<input type="radio" name="paint mode" value="tile" onclick="on_paint_tile();"> tile
						<input type="radio" name="paint mode" value="sprite" onclick="on_paint_sprite();"> sprite
					</form>
					<div id="paintNav" style="display:none;">
						<button class="color0" onclick="prev();"> < prev </button>
						<button class="color0" onclick="next();"> next > </button>
						<button class="color0" onclick="newDrawing();"> + new </button>
					</div>
					<canvas id="paint"></canvas>
					<br>
					<canvas id="paintNavThumbnails"></canvas>
					<br>
					<div id="paintCommands">
						<button class="color0" onclick="duplicateDrawing();"> ++ duplicate </button>
						<button class="color0" onclick="deleteDrawing();"> x delete x </button>
					</div>
					<div id="wall" style="display:none;">
						<input type="checkbox" id="wallCheckbox" onchange="on_toggle_wall();">
						<label for="wallCheckbox">
							wall
						</label>

						<button class="color0" onclick="apply_wall_setting_all_rooms();">apply to all rooms</button>
					</div>
					<div id="dialog" style="display:none;">dialog:
						<!-- <input type="text" id="dialogText" onkeydown="on_change_dialog();" onkeyup="on_change_dialog();" onchange="on_change_dialog();"> --> 
						<br>
						<textarea id="dialogText" class="dialogTextArea" onkeydown="on_change_dialog();" onkeyup="on_change_dialog();" onchange="on_change_dialog();"></textarea> <!-- rows="2" cols="32" -->
					</div>
					<div id="isAnimated" style="display:none;">add animation <input type="checkbox" id="animatedCheckbox" onchange="on_toggle_animated();"> </div>
					<div id="animation" style="display:none;">
						<form>
							keyframe:
							<input id="animationOptionFrame1" type="radio" name="keyframe" onclick="on_paint_frame1();" checked> frame 1
							<input id="animationOptionFrame2" type="radio" name="keyframe" onclick="on_paint_frame2();"> frame 2
						</form>
					</div>
					<button class="color0" onclick="toggleGrid();"> show/hide pixel grid </button>
				</div>

				<div id="colorsPanel" class="panel color1">
					<div class="bar color1" onmousedown="grabCard(event);">
						<i class="material-icons">palette</i>
						colors <span class="minimize" onclick="hidePanel('colorsPanel');">[ - ]</span>
					</div>
					<div id="paletteIdContainer" style="display:none;">palette <span id="paletteId">0</span></div>
					<input type="color" value="#0052cc" id="backgroundColor" onchange="on_change_color_bg();" autocomplete="off"> background <br>
					<input type="color" value="#809fff" id="tileColor" onchange="on_change_color_tile();" autocomplete="off"> tile <br>
					<input type="color" value="#ffffff" id="spriteColor" onchange="on_change_color_sprite();" autocomplete="off"> sprite <br>
					<div id="colorPickerHelp" class="helpMessage" style="display:none;">
						Having trouble choosing hex colors? <br>
						Try this online <a href="http://www.w3schools.com/colors/colors_picker.asp" target="_blank">color picker</a>.
					</div>
					<div id="paletteNav" style="display:none;">
						<button class="color0" onclick="prevPalette();"> < prev </button>
						<button class="color0" onclick="nextPalette();"> next > </button>
					</div>
					<button class="color0" onclick="newPalette();"> + new color palette</button>
				</div>

				<div id="downloadPanel" class="panel color2">
					<div class="bar color2" onmousedown="grabCard(event);">
						<i class="material-icons">file_download</i>
						download <span class="minimize" onclick="hidePanel('downloadPanel');">[ - ]</span>
					</div>
					download game as html file: <br>
					<button class="color0" onclick="exportGame();">download game</button><br>
					<div id="downloadOptions" class="options">
						download options: <br>
						<input type="color" value="#ffffff" id="pageColor" onchange="on_change_color_page();" autocomplete="off"> page color
					</div>
					<div id="downloadHelp" class="helpMessage" style="display:none;">
						Note: your browser doesn't support<br>
						direct downloads, so sharing requires<br>
						some extra steps:<br>
						- press share <br>
						- a new tab will open <br>
						- save that tab <br>
						- name it "mygame.html" <br>
						- share your game as a web page!
					</div>
					<br>
					import game from html file: <br>
					<input type="file" onchange="importGameFromFile(event);"/>
				</div>

				<div id="gifPanel" class="panel color2" style="display:none;">
					<div class="bar color2" onmousedown="grabCard(event);">
						<i class="material-icons">videocam</i>
						record gif <span class="minimize" onclick="hidePanel('gifPanel');">[ - ]</span>
					</div>
					
					<button class="color0" id="gifStartButton" onclick="startRecordingGif();">start recording</button>
					<button class="color0" id="gifStopButton" onclick="stopRecordingGif();" style="display:none;">stop recording</button>
					<span id="gifRecordingText" style="color:red;display:none;">recording...</span>
					<span id="gifEncodingText" style="color:green;display:none;">encoding...</span>
					
					<br/>
					
					<img width="300" height="300" id="gifPreview"/>
					
					<br/>
					
					<a href="" download="recording.gif" target="_blank" id="gifDownload">download gif</a>
				</div>

				<div id="dataPanel" class="panel color0" style="display:none;">
					<div class="bar color0" onmousedown="grabCard(event);">
						<i class="material-icons">save</i>
						game data <span class="minimize" onclick="hidePanel('dataPanel');">[ - ]</span>
					</div>
					<textarea id="game_data" style="width:300px;height:300px;" onchange="on_game_data_change();"></textarea>
					<br>
					<button class="color0" id="resetData" onclick="resetGameData();">reset game data</button>
					<div class="helpMessage">
						(be careful, you'll lose your changes <br>if you reset the game data)
					</div>
				</div>

			</div> <!-- Editor Content -->
		</div> <!-- Editor Window -->

	</body>
</html>